# tree-menu-cms

Это django приложение, которое реализует древовидное меню, соблюдая следующие условия:

+ Меню реализовано через template tag
+ Все, что над выделенным пунктом - развернуто. Первый уровень вложенности под выделенным пунктом тоже развернут.
+ Хранится в БД.
+ Редактируется в стандартной админке Django
+ Активный пункт меню определяется исходя из URL текущей страницы
+ Меню на одной странице может быть несколько. Они определяются по названию.
+ При клике на меню происходит переход по заданному в нем URL. Он может быть задан как явным образом, так и через named URL.
+ На отрисовку каждого меню требуется ровно 1 запрос к БД
+ При выполнении задания из библиотек использовал только Django и стандартную библиотеку Python.

Это django приложение, который позволяет вносить в БД меню (одно или несколько) через админку, и нарисовать на любой нужной странице меню по названию.
 {% draw_menu 'main_menu' %}

### Содержание:
+ [Как запустить проект](#Как-запустить-проект)
+ [Как работать с проектом](#Как-работать-с-проектом)

## Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/lolevan/tree-menu-cms.git
```

```
cd tree-menu-cms/project/
```

Cоздать и активировать виртуальное окружение:

```
python -m venv venv
```

```
source venv/Scripts/activate
```

или

```
source venv/bin/activate
```

Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

Сделать и выполнить миграции:

```
python manage.py makemigrations
```

```
python manage.py migrate
```

Запустить проект:

```
python manage.py runserver
```

Перейти по ссылке:

```
http://127.0.0.1:8000/
```

## Как работать с проектом

Создаем админа:

```
python manage.py createsuperuser
```

Переходим по ссылке и авторизируемся:

```
http://127.0.0.1:8000/admin/
```

Переходим в модель 'Menus' и создаем меню:

![create_menu](https://user-images.githubusercontent.com/86129944/216987664-4447512b-166c-4d67-ad17-ffaf1e939521.png)

Переходим в объект 'root' в модели 'Nodes' и добавляем дочерние подпункты нажимая кнопку save:

![image](https://user-images.githubusercontent.com/86129944/216991693-b602e7c2-d187-47ff-980b-b4f0ff0b79c0.png)
```
- ulr дочерних узлов должен обезательно начинаться с **/menu/**
```

Для показа меню надо провести следущие манипуляции:

```
- Зайти menu_cms/templates/menu_cms/menu.html и поставить 'menu name' которыое вы указали при создании меню
```

![image](https://user-images.githubusercontent.com/86129944/216996892-abe86894-685a-4b74-ac57-ab8c22874ed5.png)

```
- Зайти menu_cms/urls.py и поставить 'menu name' которыое вы указали при создании меню
```

![image](https://user-images.githubusercontent.com/86129944/216997835-11ce164a-d2c1-4fe1-a8c5-9ddf452cf6d8.png)

Дальше запускаем проект:

```
python manage.py runserver
```
![image](https://user-images.githubusercontent.com/86129944/216998733-15961b90-2573-4250-8cd2-fd3bbfb275db.png)
